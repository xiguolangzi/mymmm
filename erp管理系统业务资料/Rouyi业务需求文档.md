# 《业务需求文档》

## 1 租户管理

### 	1.1 添加租户



### 	1.2 角色管理(权限)





## 2 基础资料

### 	2.1 计量单位

### 	2.2 序列号管理

### 	2.3 规格分类

### 	2.4 品牌信息

### 	2.5 物流公司

### 	2.6 货柜



## 3 商品管理

### 		3.1 税率管理

### 		3.2 商品分类

### 		3.3 添加商品

### 		3.4 商品查询(SKU)

### 		3.5 添加套餐

## 4 客户管理

### 		4.1 客户分类

```bash
# 1 公共数据部分：
	-- 1 按照西班牙地区划分；
	-- 2 公共部分数据不允许租户修改；
```

### 		4.2 添加客户

```bash
# 1 内容
	-- 1 客户基础信息： 编码/名称 不能重复；
	-- 2 客户发票信息： 税号不能重复；
	-- 3 客户联系人信息：
	-- 4 客户账户信息：暂时未开发；
```

### 		4.3 客户等级

```bash
# 作用：
	-- 根据客户等级，绑定客户基础折扣率
	-- 根据客户等级，绑定客户 价格1/价格2/价格3  -- 暂时还在考虑，是否再此处使用
```

### 	4.4 客户绑定业务员查询

```bash
# 1 记录客户绑定过的业务员；
# 2 只允许查询，不开放编辑和删除功能；
# 3 客户当前绑定的业务员，状态为默认状态；
```

### 		4.4 供应商分类

### 		4.5 添加供应商



## 5 采购管理

### 		5.1 采购订单

### 		5.2 采购订单明细

### 		5.3 采购入库单

### 		5.4 采购入库单明细

### 		5.5 采购发票登记

### 		5.6 入库单关联采购发票

## 6 销售管理

### 		6.1 caja注册

### 		6.2 交班记录

### 		6.3 商品促销活动

```bash
# 1 促销活动类型：
	-- 1.1 满减
	-- 1.2 满赠
	-- 1.3 买x送y
	-- 1.4 商品折扣
# 2 活动要求：
	-- 2.1 参与活动的范围：同一sku只能参与一个活动
		全场商品：所有上架的商品；
		指定商品分类：所有该分类的商品；
		指定SKU：只针对sku;
	-- 2.2 活动编码、活动名称 不可以重复；
```

### 		6.4 业务员佣金管理

```bash
# 1 佣金规则：
	-- 1.1 同一业务员可以同时启用多个佣金策略；
	-- 1.2 默认获取默认佣金策略；
	-- 1.3 默认佣金策略 只能有一个；
```

### 		6.5 客户销活动

```bash
# 1 活动对象 针对整张订单：
# 2 活动内容：
	-- 2.1 活动名称、活动时间、活动状态
	-- 2.2 业务员佣金
		-- 基础佣金 = 业务员管理中设置的给定佣金点数；
		-- 累加佣金点数 = 追加的佣金点数
		-- 最后业务员的佣金点数 = 基础佣金 + 累加佣金点数
	-- 2.3 客户折扣
		-- 基础折扣 = 客户档案绑定的基础折扣；
		-- 追加折上折 = 在基础折扣计算的金额后再打折扣，即折上折；
		-- 最后订单金额 = 销售额*（1-基础折扣）*（1-追加折扣）
	-- 2.4 促销活动交叉
		-- 同时存在促销活动
		-- 计算促销活动：两个活动叠加计算
		-- 不计算促销活动：促销互动不生效

```



### 	6.6 销售订单

#### 		6.6.1 拆单

```bash
# 1 订单状态 order_status： "预购状态" 才可以拆单；

# 2 拆单 -> 生成拆单，拆单的订单号 = "原始订单号" + "-001" -> 绑定原始订单(parent_order_id)；

# 2 拆单后 -> 原始订单 更新订单状态 order_status： "已拆单"；

# 3 订单采用树状结构；
	-- 默认 绑定的父级ID = 0
```



#### 		6.6.2 二批模式

```bash
# 0 订单类型 order_type：
	-- 1 预购订单：只有初始单号 order_init_no 没有订单号的订单 order_no
	-- 2 确认订单：生成订单号 order_no
	-- 3 已拆单：生成新的订单，新订单绑定原始订单，原始订单的类型修改成 "已拆单"
	-- 4 生成发票：生成发票数据的订单
	统计销售数量：预购订单 + 确认订单 + 生成发票
	应收统计：预购订单金额 + 确认订单金额 + 发票金额(生成发票)
# 1 订单状态 order_status：
	--	1-预购，2-拣货，3-复核，4-确认订单，5-已取消
	
# 2 支付状态 order_pay_status：
	--	1-现结(当场结清) 2-欠款(未结清、部分结清) 
	--	手动开单 默认 欠款
	--	caja 默认 现结
	
# 3 挂单 order_is_hold
	--	预购、拣货、复核 阶段都可以挂起；
	--	挂单状态 order_is_hold：0-正常订单 1-挂单；
	--	拣货、复核 阶段如果有异常，支持文员修改预购订单；
	
# 4 含税/不含税 - 订单维度
	-- 4.1 基础数据计算
	订单金额 = 单价 * 数量
	折扣金额 = 订单金额 * 折扣
    销售金额 = 订单金额 - 折扣金额 - 促销活动优惠金额
    -- 4.2 含税 (需要反推)
    实际应收金额 = 税额 + 基础金额 = 销售金额
    -- 4.3 不含税
    实际应收金额 = 税额 + 基础金额 
    基础金额 = 销售金额
    
# 5 订单支付类型 order_pay_status：
	-- 5.1 现结：计入 "交班结转-现金" "交班结转-银行"
	-- 5.2 欠款单: 计入 "应收账款"
	
# 6 付款抹零 total_zero_amount：
	-- 6.1 付款抹零金额计入
	-- 6.2 核销中的 优惠金额 + 付款抹零 = 优惠金额 -> 计入 "销售费用 - 优惠金额"
	
# 7 订单删除、取消订单汇总查询
    
```

#### 		6.6.3 百元模式

```bash
# 0 订单类型 order_type：
	-- 1 预购订单：只有初始单号 order_init_no 没有订单号的订单 order_no
	-- 2 确认订单：生成订单号 order_no
	-- 3 已拆单：生成新的订单，新订单绑定原始订单，原始订单的类型修改成 "已拆单"
	-- 4 生成发票：生成发票数据的订单
	统计销售数量：预购订单 + 确认订单 + 生成发票
	应收统计：预购订单金额 + 确认订单金额 + 发票金额(生成发票)
# 1 订单状态：
	-- 1-预购，4-确认订单，5-已取消
	
# 2 支付状态 order_pay_status：
	-- 1-现结(当场结清)  2-欠款(未结清、部分结清) 
	-- caja 默认 现结
	
# 3 挂单 order_is_hold
	--预购、拣货、复核 阶段都可以挂起

# 4 含税/不含税 - 订单维度
	-- 4.1 基础数据计算
	订单金额 = 单价 * 数量
	折扣金额 = 订单金额 * 折扣
    销售金额 = 订单金额 - 折扣金额 - 促销活动优惠金额
    -- 4.2 含税 (需要反推)
    实际应收金额 = 税额 + 基础金额 = 销售金额
    -- 4.3 不含税
    实际应收金额 = 税额 + 基础金额 
    基础金额 = 销售金额
    
# 5 订单支付类型 order_pay_status：
	-- 5.1 现结：计入 "交班结转-现金" "交班结转-银行"
	-- 5.2 欠款单: 计入 "应收账款"
	
# 6 付款抹零 total_zero_amount：
	-- 6.1 付款抹零金额计入
	-- 6.2 核销中的 优惠金额 + 付款抹零 = 优惠金额 -> 计入 "销售费用 - 优惠金额"
	
# 7 订单删除、取消订单汇总查询
```



## 7 库存管理

### 		7.1 添加仓库

### 		7.2 出入库记录

### 		7.3 出入库明细

### 		7.5 库存查询

#### 				7.5.1 按仓库维度查询

#### 				7.5.2 按sku维度查询

#### 				7.5.3 按批次维度查询

### 	7.6 库存预警



## 8 财务管理

### 		8.1 基础资料

#### 				8.1.1 会计项目

#### 				8.1.2 资金账户

#### 				8.1.3 会计期间

#### 				8.1.4 会计科目

#### 				8.1.5 币种

### 		8.2 总账

#### 				8.2.1 会计凭证

#### 				8.2.2 科目余额表

#### 				8.2.3 科目明细表

### 		8.3 费用登记

#### 				8.3.1 费用发票登记

#### 				8.3.2 采购发票登记

### 		8.4 现金银行日记账

### 		8.5 应收管理

### 		8.6 应付管理

### 		8.7 固定资产

### 		8.8 薪资管理

#### 				8.8.1 考勤管理

#### 				8.8.2 薪资管理

#### 				8.8.3 薪资历史查询

## 9 报表管理

### 		9.1 财务报表

#### 				9.1.1 资产负债表

#### 				9.1.2 利润表

#### 				9.1.3 应收账期管理

```
应收金额合计 月份 统计 账期 超账期金额 客户维度 
```

#### 				9.1.4 应付账期管理

```
应付金额合计 月份 统计 账期 超账期金额 供应商维度 
现有资金情况 警报预警
```

### 		9.2 销售报表

#### 				9.2.1 销售金额(业务员)
	-- 月分、季度、年	
	-- 销售金额走势图
	-- 销售金额统计 
	-- 销售排名 Top10
	-- 预订单金额 拣货金额 复核金额 预订单金额 完成订单金额

#### 				9.2.2 退货率(业务员)：
	-- 月分、季度、年	
	-- 退货金额走势图
	-- 退货金额统计 
	-- 退货率 

#### 				9.2.3 商品维度统计：
	-- 销售排名 Top10 
	-- 销量统计 
	-- 月份走势图 
	-- 退货统计

### 		9.3 客户统计表

#### 				9.3.1 新增客户统计(业务员)
	-- 唤醒客户：3月之内没有出单
	-- 新发掘客户

#### 				9.3.2 老客户统计(业务员)：
	-- 活跃客户：3月之内有出单
	-- 石化客户：3月之内没有出单
	
