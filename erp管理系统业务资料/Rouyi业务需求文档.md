# 《业务需求文档》

## 1 租户管理

### 	1.1 添加租户



### 	1.2 角色管理(权限)





## 2 基础资料

### 	2.1 计量单位

### 	2.2 序列号管理

```bash
# 1 序号类型：


# 2 序号规则类型：
	-- 年
	-- 年月
	-- 随即无序
	
# 3 时间格式：
	-- yyyy
	-- yyyyMM
	
# 4 默认有序部分
	-- 6位
	-- 默认"000001"
	
# 5 规则明细记录
	-- 
```



### 	2.3 规格分类

### 	2.4 品牌信息

### 	2.5 物流公司

### 	2.6 货柜



## 3 商品管理

### 		3.1 税率管理

```bash
# 1 税率独立维护
	-- 固定维护税率：税率名称、税率值
	-- 税率名称唯一、不可重复
# 2 商品只能绑定维护好的税率；
	-- 可以根据税率过滤商品
	-- 如果需要修改商品的税率，只需要维护税率信息，绑定的商品会即使同步税率！
```

### 		3.2 商品分类

```bash
# 1 作用：
	-- 用户划分商品信息
```

### 		3.3 添加商品

```bash
# 1 商品
	-- 主要维护sku公共数据：商品分类、商品名称、品牌、计量单位、税率、成本计算方式
	-- 主图: 后期网站使用
	-- 包装信息：重量、体积 -> 后期对接运输公司计算运费
	-- 单价：商品单价 单价1、单价2、单价3、单价4、单价5、单价6 -> 主要作用是快速同步sku单价

# 2 SKU
	-- SKU为最小单位，业务使用SKU不适用"商品"，"商品"主要是服务 SKU 而准备的；
	-- SKU规格：
		-- SKU编码：唯一独立的编码，用于识别产品；
		-- 规格名称： 单独维护(颜色、尺寸...)
		-- 规格属性值：红 黑 S M L ...
		-- 每个规格有独立的图片
		-- 每个规格有独立的价格：SKU单价、单价1、单价2、单价3、单价4、单价5、单价6
		-- 每个SKU有自己的 启售/停售 状态，
			-- 如果"商品"停售，其他所有SKU停售
			-- 如果"商品"启售，其他所有SKU启售
		-- 显示每个SKU的库存；

# 3 商品(没有SKU)
	-- 会自动生成一个默认的SKU；
	-- 默认的SKU的 skuValue = "default";
	-- 默认的SKU单价、状态同步 "商品"；
	-- SKU规格显示："--"
	
# 4 处理skuValue的展示：
	不需要JSON解析，直接通过方法 getSkuValue() 获取，自动处理默认和非默认等情况，如下：
	<div v-if="getSkuValue(scope.row.skuValue) === 'default'">
     	--  <!-- 直接显示默认 SKU -->
     </div>
     <div v-else v-for="(item, index) in getSkuValue(scope.row.skuValue)" :key="index">
      	<strong>{{ item[0] }}:</strong>
      	<span>{{ item[1] }}</span>
      </div>
    
# 5 基础单价：
	-- SKU单价 是基础单价！
	-- 单价2、单价3、单价4、单价5、单价6 都是备选单价使用！
```

### 		3.4 商品查询(SKU)

```bash
# 1 查询方式：
	-- 通过 "商品" 查询：
		-- 商品名称
		-- 商品编码
	-- 通过 "SKU" 查询
		-- SKU编码
```

### 		3.5 添加套餐

```bash
# 1 套餐的原理：
	-- 套餐可以理解成是一个独立的 SKU
	-- 套餐只有一个价格
	-- 套餐可以绑定多个 SKU
	-- 支持固定绑定：消费者只能选择固定套餐组合；
	-- 支持动态绑定: 消费者可以选择不同的套餐的组合；
	-- 同时支持 支持固定绑定、支持动态绑定 两种模式同时存在的套餐；
	
```



## 4 客户管理

### 		4.1 客户分类

```bash
# 1 公共数据部分：
	-- 1 按照西班牙地区划分；
	-- 2 公共部分数据不允许租户修改；
```

### 		4.2 添加客户

```bash
# 1 内容
	-- 1 客户基础信息： 编码/名称 不能重复；
	-- 2 客户发票信息： 税号不能重复；
	-- 3 客户联系人信息：
	-- 4 客户账户信息：暂时未开发；
```

### 		4.3 客户等级

```bash
# 1 客户等级绑定的数据：
	-- 绑定不同的基础折扣率；
		基础折扣率：客户下单整单的折扣率！
	-- 绑定不同的单价：
    	-- 不同的客户可以绑定不同的单价(SKU单价、单价1、单价2、单价3、单价4、单价5、单价6)；
    	-- 前提是SKU要维护多个价格，否则找不到价格默认选择"SKU单价"
```

### 	4.4 客户绑定业务员查询

```bash
# 1 记录客户绑定过的业务员；
# 2 只允许查询，不开放编辑和删除功能；
# 3 客户当前绑定的业务员，状态为默认状态；
```

### 		4.4 供应商分类

### 		4.5 添加供应商



## 5 采购管理

### 		5.1 采购订单

### 		5.2 采购订单明细

### 		5.3 采购入库单

#### 	5.3.1 采购入库单 流程

```bash
# 1 采购入库单状态：
	-- 编辑、已保存、待入库、已入库、待绑定发票、已绑定发票、归档
# 2 流程：
	-- 编辑：初始计划入库数据录入， 可以引用采购入库单；
	-- 已保存：确认入库信息 -> 提交入库申请；
	-- 待入库：打印入库数据 -> 检查实际入库数据 -> 如果有冲突 -> 驳回待入库 -> 重新修改保存提交入库；
	-- 已入库：确认入库信息与入库单信息一致 -> 入库操作 ：
		---> 生成入库单 -> 更新 SKU库存、SKU成本 ；
		---> 如果有采购订单的数据 -> 更新采购订单的 SKU入库数量、SKU缺货数量；
	-- 待绑定发票：选中采购发票 ,有可能入库之前还没有费用登记录入 采购发票;
	-- 已绑定发票：采购发票 更新已入库金额；
	-- 归档：主动归档 / 被动归档
		-- 被动归档：绑定的采购发票归档 -> 同步归档采购入库单！
# 3 额外功能：
	-- 3.1 引用采购入库单功能需要开启；
		-- 主要因为开启后表才会增加采购订单字段；
	-- 3.2 绑定发票：
		-- 可以绑定的发票状态：已审核的发票 ；
		-- 绑定发票不允许删除！
	-- 3.3 批次号：
		-- 默认 编辑入库单的日期(20250225)
		-- 可以手动修改
	-- 3.4 过期日期：手动选择！
	-- 3.5 展示 绑定采购订单的订单总数量、订单欠货数量；
```

#### 	5.3.2 销售出库单 流程

```bash
# 1 销售出库单状态：
	
# 2 流程：

```

#### 	5.3.3 销售退货入库单 流程

```bash
# 1 销售退货入库单状态：
	
# 2 流程：

```

#### 	5.3.4 仓库调拨单 流程

```bash
# 1 仓库调拨单状态：
	
# 2 流程：

```



### 		5.4 采购入库单明细

### 		5.5 采购发票登记

### 		5.6 入库单关联采购发票

## 6 销售管理

### 		6.1 caja注册

### 		6.2 交班记录

### 		6.3 商品促销活动

```bash
# 1 促销活动类型：
	-- 1.1 满减
	-- 1.2 满赠
	-- 1.3 买x送y
	-- 1.4 商品折扣
# 2 活动要求：
	-- 2.1 参与活动的范围：同一sku只能参与一个活动
		全场商品：所有上架的商品；
		指定商品分类：所有该分类的商品；
		指定SKU：只针对sku;
	-- 2.2 活动编码、活动名称 不可以重复；
```

### 		6.4 业务员佣金管理

```bash
# 1 佣金规则：
	-- 1.1 同一业务员可以同时启用多个佣金策略；
	-- 1.2 默认获取默认佣金策略；
	-- 1.3 默认佣金策略 只能有一个；
```

### 		6.5 客户销活动

```bash
# 1 活动对象 针对整张订单：
# 2 活动内容：
	-- 2.1 活动名称、活动时间、活动状态
	-- 2.2 业务员佣金
		-- 基础佣金 = 业务员管理中设置的给定佣金点数；
		-- 累加佣金点数 = 追加的佣金点数
		-- 最后业务员的佣金点数 = 基础佣金 + 累加佣金点数
	-- 2.3 客户折扣
		-- 基础折扣 = 客户档案绑定的基础折扣；
		-- 追加折上折 = 在基础折扣计算的金额后再打折扣，即折上折；
		-- 最后订单金额 = 销售额*（1-基础折扣）*（1-追加折扣）
	-- 2.4 促销活动交叉
		-- 同时存在促销活动
		-- 计算促销活动：两个活动叠加计算
		-- 不计算促销活动：促销互动不生效

```



### 	6.6 销售订单

#### 		6.6.1 拆单

```bash
# 1 订单状态 order_status： "预购状态" 才可以拆单；

# 2 拆单 -> 生成拆单，拆单的订单号 = "原始订单号" + "-001" -> 绑定原始订单(parent_order_id)；

# 2 拆单后 -> 原始订单 更新订单状态 order_status： "已拆单"；

# 3 订单采用树状结构；
	-- 默认 绑定的父级ID = 0
```



#### 		6.6.2 二批模式

```bash
# 0 订单类型 order_type：
	-- 1 预购订单：只有初始单号 order_init_no 没有订单号的订单 order_no
	-- 2 确认订单：生成订单号 order_no
	-- 3 已拆单：生成新的订单，新订单绑定原始订单，原始订单的类型修改成 "已拆单"
	-- 4 生成发票：生成发票数据的订单
	统计销售数量：预购订单 + 确认订单 + 生成发票
	应收统计：预购订单金额 + 确认订单金额 + 发票金额(生成发票)
# 1 订单状态 order_status：
	--	1-预购，2-拣货，3-复核，4-确认订单，5-已取消
	
# 2 支付状态 order_pay_status：
	--	1-现结(当场结清) 2-欠款(未结清、部分结清) 
	--	手动开单 默认 欠款
	--	caja 默认 现结
	
# 3 挂单 order_is_hold
	--	预购、拣货、复核 阶段都可以挂起；
	--	挂单状态 order_is_hold：0-正常订单 1-挂单；
	--	拣货、复核 阶段如果有异常，支持文员修改预购订单；
	
# 4 含税/不含税 - 订单维度
	-- 4.1 基础数据计算
	订单金额 = 单价 * 数量
	折扣金额 = 订单金额 * 折扣
    销售金额 = 订单金额 - 折扣金额 - 促销活动优惠金额
    -- 4.2 含税 (需要反推)
    实际应收金额 = 税额 + 基础金额 = 销售金额
    -- 4.3 不含税
    实际应收金额 = 税额 + 基础金额 
    基础金额 = 销售金额
    
# 5 订单支付类型 order_pay_status：
	-- 5.1 现结：计入 "交班结转-现金" "交班结转-银行"
	-- 5.2 欠款单: 计入 "应收账款"
	
# 6 付款抹零 total_zero_amount：
	-- 6.1 付款抹零金额计入
	-- 6.2 核销中的 优惠金额 + 付款抹零 = 优惠金额 -> 计入 "销售费用 - 优惠金额"
	
# 7 订单删除、取消订单汇总查询
    
```

#### 		6.6.3 百元模式

```bash
# 0 订单类型 order_type：
	-- 1 预购订单：只有初始单号 order_init_no 没有订单号的订单 order_no
	-- 2 确认订单：生成订单号 order_no
	-- 3 已拆单：生成新的订单，新订单绑定原始订单，原始订单的类型修改成 "已拆单"
	-- 4 生成发票：生成发票数据的订单
	统计销售数量：预购订单 + 确认订单 + 生成发票
	应收统计：预购订单金额 + 确认订单金额 + 发票金额(生成发票)
# 1 订单状态：
	-- 1-预购，4-确认订单，5-已取消
	
# 2 支付状态 order_pay_status：
	-- 1-现结(当场结清)  2-欠款(未结清、部分结清) 
	-- caja 默认 现结
	
# 3 挂单 order_is_hold
	--预购、拣货、复核 阶段都可以挂起

# 4 含税/不含税 - 订单维度
	-- 4.1 基础数据计算
	订单金额 = 单价 * 数量
	折扣金额 = 订单金额 * 折扣
    销售金额 = 订单金额 - 折扣金额 - 促销活动优惠金额
    -- 4.2 含税 (需要反推)
    实际应收金额 = 税额 + 基础金额 = 销售金额
    -- 4.3 不含税
    实际应收金额 = 税额 + 基础金额 
    基础金额 = 销售金额
    
# 5 订单支付类型 order_pay_status：
	-- 5.1 现结：计入 "交班结转-现金" "交班结转-银行"
	-- 5.2 欠款单: 计入 "应收账款"
	
# 6 付款抹零 total_zero_amount：
	-- 6.1 付款抹零金额计入
	-- 6.2 核销中的 优惠金额 + 付款抹零 = 优惠金额 -> 计入 "销售费用 - 优惠金额"
	
# 7 订单删除、取消订单汇总查询
```



## 7 库存管理

### 		7.1 添加仓库

### 		7.2 出入库记录(入库单)

```bash
# 1 入库单作用：
	-- 库存的调度中心！
	-- 所有设计库存的操作都会生成一张 入库单；
	-- 记录追踪库存商品SKU的走向；
# 2 入库单 类型：
	-- 采购入库单：采购入库单、采购退货单；
	-- 销售出库单：销售出库；
	-- 退货入库单：退货入库；
	-- 调拨入库单：
	-- 调拨出库单：
	-- 盘点入库单：
	-- 盘点出库单：
```



### 		7.3 出入库明细(入库单明细)

### 		7.5 库存查询

#### 					7.5.1 按仓库维度查询

#### 					7.5.2 按sku维度查询

#### 					7.5.3 按批次维度查询

### 	7.6 库存预警



## 8 财务管理

### 		8.1 基础资料

#### 					8.1.1 会计项目

#### 					8.1.2 资金账户

#### 					8.1.3 会计期间

#### 					8.1.4 会计科目

```bash
# 1 会计科目基础要求：
	-- 科目编码：4-2-2-2
	-- 科目类型：决定借贷方向
	-- 辅助项：客户、供应商、员工
# 2 新增科目要求：
	-- 科目编码、科目名称 唯一；
	-- 修改会计科目：只允许修改科目名称、绑定的辅助项；
	-- 公共科目不允许修改！
	-- 凭证引用过的科目不允许修改(作废状态的会计凭证除外)！
# 3 新增下级科目
	-- 不允许1：在会计凭证中引用过的科目不允许新增子级科目！(作废状态的会计凭证除外)；
	-- 不允许2：父级存在辅助项的不允许新增下级科目；
```

#### 					8.1.5 币种

### 		8.2 总账

#### 					8.2.1 会计凭证

```bash
# 1 凭证不可以有负数！
	-- 凭证通过借贷方向来调整，不可以有负数的情况！！！
	
# 2 凭证过账 
	-- 对应生成凭证的数据源需要归档，禁止发生业务！
```

#### 					8.2.2 科目余额表

#### 					8.2.3 科目明细表

### 		8.3 费用登记

#### 	8.3.0 基础数据

```bash
# 0 发票类型：
	-- 采购发票：采购活动；
	-- 费用发票：费用支出、主营业务之外的支出活动；
# 1 发票状态：
	-- 草稿、已保存、待审核、已审核、已过帐、已删除
# 2 流程：
	-- 编辑：填制发票信息 -> 保存；
		-- 发票号、订单号 至少同时存在一个！
	-- 提交审核：确认无误提交审核；
	-- 审核：确认无误 -> 审核 -> 生成凭证；
	-- 反审核：错误纠正 -> 作废凭证；
	-- 已过帐：存档不能继续修改、凭证也不能修改作废！
	-- 过账的发票：确认发票信息、确认入库金额是否与发票金额一致；
		-- 过账时系统提示，需要填写金额不一致的原因，便于后期查找核对！
		-- 如果发票金额与入库金额不一致的处理：发票红冲、继续绑定入库单；
# 3 发票登记必须绑定辅助项
	-- 为了数据追踪；
	-- 付款的发票都要有去向，便于业务核对审计！
# 4 发票金额与明细金额一致：
	-- 根据发票金额 判断凭证的借贷方向；
	-- 凭证金额不可以有负数；
	-- 金额大于0 -> 负债科目计入 贷方 (发票表头数据)、明细科目计入 借方 (明细数据)；
	-- 金额小于0 -> 负债科目计入 借方 (发票表头数据)、明细科目计入 贷方 (明细数据)；
# 5 新增会计项目功能：
	-- 通过会计项目可以快速自动填充会计科目；
	-- 会计科目同时支持手动选择；
# 6 校验金额：
	-- 校验发票金额 与 明细金额的 正负一致；
	-- 校验发票总额 = 明细总额；
# 7 上传文件：
	-- 最多上传5个文件；
	-- 每个文件不能超过2MB；
# 8 核销金额展示：
	-- 展示未核销金额、已核销金额、入库单入库金额；
# 9 操作记录：
	-- 每次操作都有记录；
	-- 每次只保留最新的操作记录，言外之意相同的操作只保留最新一次的操作记录！
	
	
```



### 		8.4 现金银行日记账

### 		8.5 应收管理

### 		8.6 应付管理

### 		8.7 固定资产

### 		8.8 薪资管理

#### 				8.8.1 考勤管理

#### 				8.8.2 薪资管理

#### 				8.8.3 薪资历史查询

## 9 报表管理

### 		9.1 财务报表

#### 				9.1.1 资产负债表

#### 				9.1.2 利润表

#### 				9.1.3 应收账期管理

```
应收金额合计 月份 统计 账期 超账期金额 客户维度 
```

#### 				9.1.4 应付账期管理

```
应付金额合计 月份 统计 账期 超账期金额 供应商维度 
现有资金情况 警报预警
```

### 		9.2 销售报表

#### 				9.2.1 销售金额(业务员)
	-- 月分、季度、年	
	-- 销售金额走势图
	-- 销售金额统计 
	-- 销售排名 Top10
	-- 预订单金额 拣货金额 复核金额 预订单金额 完成订单金额

#### 				9.2.2 退货率(业务员)：
	-- 月分、季度、年	
	-- 退货金额走势图
	-- 退货金额统计 
	-- 退货率 

#### 				9.2.3 商品维度统计：
	-- 销售排名 Top10 
	-- 销量统计 
	-- 月份走势图 
	-- 退货统计

### 		9.3 客户统计表

#### 				9.3.1 新增客户统计(业务员)
	-- 唤醒客户：3月之内没有出单
	-- 新发掘客户

#### 				9.3.2 老客户统计(业务员)：
	-- 活跃客户：3月之内有出单
	-- 石化客户：3月之内没有出单
